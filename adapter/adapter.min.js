/* h5a-adapter 0.5.0  */
!function(){var i=window,e=document,t=i.analytics;var n=Array.isArray||function(i){return"[object Array]"===Object.prototype.toString.call(i)};for(var a,s=((a=window.H5AnalyticsObject)?a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):"")||"h5a",r=window[s],c=r.l||+new Date,l="/",o=[].slice.call(e.scripts,0),p=/(.+\/)analytics\.js$/,h=0;h<o.length;h+=1){var d=o[h].src.match(p);if(d){l=d[1];break}}t.timing=function(i){return(i||new Date)-c};var f=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,u=[],g=new(t.createIntegration("utils").tag("script",'<script src="{{ script }}">')),w=/[A-Z]/g;function y(i,e){this.name=i,this.alias=i.match(w).join(""),this.REG_NAME=new RegExp("("+this.name+")|("+this.alias+")");var t={};t[i]=e;var n=["init",t];this.q=[n],this.script=e.script,this.script||(this.script=l+"analytics-integration-"+i.toLocaleLowerCase().replace(/\s/gi,"-")+".js")}function v(){var i,e,t=[].slice.call(arguments),n=t[0],a=t.slice(1),s=f.exec(n),r=(s[1],s[2],s[3]);switch(console.assert(r,"methodName is required"),r){case"init":if(1===a.length){var c=a[0],l=Object.keys(c)[0];a=[l,c[l]]}if(2===a.length){var o=new y(a[0],a=a[1]);u.push(o),g.load("script",{script:o.script},function(){o.ready()})}else i="invalid init options",console.log(i,e);break;case"send":u.forEach(function(i){i.send(JSON.parse(JSON.stringify(a)))});break;default:console.warn("invalid command")}}y.prototype.enqueue=function(i){this.q.push(i)},y.prototype.padding=function(i,e){var t=i.length,n={$$intg:this.name};if(t<e)console.warn("invalid args",i,e);else{if(t===e)return i.concat([{},n]);if(t===e+1)return i.concat([n]);if(t===e+2){var a=i.pop();return this.REG_NAME.test(a.$exclude)||(a.$$intg=n.$$intg),delete a.$exclude,i.concat([a])}console.warn("invalid args",i,e)}},y.prototype.send=function(i){if(this._ready){var e=i[0],n=i.slice(1,i.length);if("init"===e)t.init(n[0]);else if("identify"===e)n=this.padding(n,n.length-1),t.identify.apply(null,n);else if("page"===e)n=this.padding(n,0),t.page.apply(null,n);else if("track"===e)n=this.padding(n,1),t.track.apply(null,n);else if("exception"===e)console.warn("NotImplemented send exception");else{e===this.name&&this.send(n)}}else this.enqueue(i)},y.prototype.ready=function(){if(this._ready=!0,this.q.length>0)for(var i=this.q.shift();i;)this.send([this.name].concat(i)),i=this.q.shift()};var m=r&&r.q;if(n(m)){for(var $=0;$<m.length;$++)v.apply(v,m[$]);window[s]=v}else console.warn("invalid lib.q")}(window);